# Многострочный режим якорей ^ $, флаг "m"

Многострочный режим включается флагом `pattern:m`.

В этом случае изменяется поведение `pattern:^` и `pattern:$`.

В многострочном режиме они означают не только начало/конец текста, но и начало/конец строки.

Иными словами:
- `pattern:^` совпадает сразу после перевода строки, в дополнение к началу текста.
- `pattern:$` совпадает перед каждым переводом строки, в дополнение к концу текста.

## Поиск в начале строки ^

В примере ниже текст состоит из нескольких строк. Шаблон `pattern:/^\d/gm` берёт цифру с начала каждой строки:

```js run
let str = `1е место: Винни
2е место: Пятачок
3е место: Слонопотам`;

*!*
alert( str.match(/^\d/gm) ); // 1, 2, 33
*/!*
```

Обратим внимание -- без флага  `pattern:m` было бы найдено только первое число:

```js run
let str = `1е место: Винни
2е место: Пятачок
3е место: Слонопотам`;

*!*
alert( str.match(/^\d/g) ); // 1
*/!*
```

Так происходит, потому что в обычном режиме каретка `pattern:^` -- это только начало текста, а в многострочном -- начало любой строки.

## Поиск в конце строки $

Символ доллара `pattern:$` ведёт себя аналогично.

Регулярное выражение `pattern:\d$` ищет последнюю цифру в каждой строке

```js run
let str = `Винни: 1
Пятачок: 2
Слонопотам: 3`;

alert( str.match(/\d$/gim) ); // 1,2,3
```

Без флага `pattern:m` якорь `pattern:$` обозначал бы конец всей строки, и было бы найдено только последнее слово.

## Сравнение якорей и \n

Для того, чтобы найти конец строки, можно использовать не только якоря `pattern:^` и `pattern:$`, но и символ перевода строки `\n`.

В чём разница? Давайте посмотрим на примере.

Поищем `pattern:\d\n` вместо `pattern:\d$`:

```js run
let str = `Винни: 1
Пятачок: 2
Слонопотам: 3`;

alert( str.match(/\d\n/gim) ); // 1\n,2\n
```

Как видим, совпадений теперь два, а не три.

Это потому, что после `subject:3` нет перевода строки (а конец текста, подходящий под `pattern:$` - есть).

Ещё одно отличие: теперь в каждое найденное совпадение входит символ перевода строки `match:\n`. В отличие от якорей `pattern:^` `pattern:$`, которые только проверяют условие (начало/конец строки), `\n` - символ и входит в результат.

Как правило, использование якорей лучше и точнее соответствуют тому, что мы хотим получить в результате.
