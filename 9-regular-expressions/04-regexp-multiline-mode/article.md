# Многострочный режим, флаг "m"

Многострочный режим включается флагом `pattern:/.../m`.

В этом случае изменяется поведение `pattern:^` и `pattern:$`.

В многострочном режиме они означают не только начало/конец текста, но и начало/конец строки. Иными словами:
- `pattern:^` совпадает не только в начале текста, но и сразу после каждого перевода строки `\n`.
- `pattern:$` совпадает не только в конце текста, но и непосредственно перед каждым `\n`.

## Начало строки ^

В примере ниже текст состоит из нескольких строк. Шаблон `pattern:/^\d+/gm` берёт число с начала каждой строки:

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

*!*
alert( str.match(/^\d+/gm) ); // 1, 2, 33
*/!*
```

Обратим внимание -- без флага  `pattern:/.../m` было бы найдено только первое число:

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

*!*
alert( str.match(/^\d+/g) ); // 1
*/!*
```

Так происходит, потому что в обычном режиме каретка `pattern:^` -- это только начало текста, а в многострочном -- начало любой строки.

## Конец строки $

Символ доллара `pattern:$` ведёт себя аналогично.

Регулярное выражение `pattern:\w+$` ищет последнее слово в каждой строке

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

alert( str.match(/\w+$/gim) ); // Винни,Пятачок,Слонопотам
```

Без флага `pattern:/.../m` якорь `pattern:$` обозначал бы конец всей строки, и было бы найдено только последнее слово.

## Якорь ^$ против \n

Для того, чтобы найти конец строки, можно использовать не только `pattern:^` и `pattern:$`, но и символ перевода строки `\n`.

Используем его в нашем примере, поищем `pattern:\w+\n` вместо `pattern:\w+$`:

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

alert( str.match() ); // Винни\n,Пятачок\n
```

Как видим, совпадения тоже найдены, но есть и существенные отличия:

1. Во-первых, `pattern:^` и `pattern:$` являются проверками, они не добавляют символ в результат. А если мы указываем в шаблоне именно `pattern:\n`, то это включает перевод строк в результат: `match:Винни\n`.
2. Во-вторых, слово `match:Слонопотам` не нашлось, так как после него нет `\n`. А конец текста есть, поэтому в предыдущем примере оно находится.

В данном случае (и так довольно часто) использование якорей лучше и точнее соответствуют тому, что мы хотим получить в результате.
